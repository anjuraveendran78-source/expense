{% load static %}
{% if role == 'user' %}
{%include 'user_header.html' %}
{% else %}
{% include 'fam_header.html' %}
{% endif %}
<!DOCTYPE html>
<html>

<head>
  <title>Transaction List</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="bg-gray-100">

  <div class="flex min-h-screen">

    <!-- ====================== SIDEBAR ====================== -->
    {% if role == 'user' %}
    {%include 'sidebar.html' %}
    {% else %}
    {% include 'fm_side_bar.html' %}
    {% endif %}

    <!-- ====================== MAIN CONTENT ====================== -->
    <main class="flex-1 p-10">

      <div class="bg-white p-6 rounded shadow">

        <h2 class="text-2xl font-bold mb-6">Transaction List</h2>

        <div class="overflow-x-auto bg-white rounded-xl shadow">
          <table class="w-full text-sm text-gray-700">

            <!-- Header -->
            <thead class="bg-gray-100 text-gray-600 uppercase text-xs tracking-wide">
              <tr>
                <th class="p-3 text-left">ID</th>
                <th class="p-3 text-left">Date</th>
                <th class="p-3 text-right">Amount</th>
                <th class="p-3 text-left">Category</th>
                <th class="p-3 text-left">Description</th>
                <th class="p-3 text-center">Type</th>
                <th class="p-3 text-center">Actions</th>
              </tr>
            </thead>

            <!-- Body -->
            <tbody class="divide-y divide-gray-100">

              {% for t in transactions %}
              <tr class="hover:bg-indigo-50 transition">

                <td class="p-3 font-medium text-gray-800">
                  {{ t.id }}
                </td>

                <td class="p-3">
                  {{ t.date }}
                </td>

                <td class="p-3 text-right font-semibold">
                  â‚¹ {{ t.amount }}
                </td>

                <td class="p-3">
                  {{ t.category_id }}
                </td>

                <td class="p-3 text-gray-600">
                  {{ t.Transaction_desc }}
                </td>

                <td class="p-3">
                  <span class="px-3 py-1 rounded-full text-xs font-semibold
            {% if t.Type == 'Income' %}
              bg-green-100 text-green-700
            {% else %}
              bg-red-100 text-red-700
            {% endif %}">
                    {{ t.Type|title }}
                  </span>
                </td>

                <td class="p-3 text-center">
                  <a href="{% url 'trans1_edit' t.id %}" class="inline-block px-3 py-1 text-xs font-medium
                    bg-blue-500 text-white rounded hover:bg-blue-600 transition">
                    Edit
                  </a>

                  <a href="{% url 'trans1_delete' t.id %}" class="inline-block px-3 py-1 text-xs font-medium ml-2
                    bg-red-500 text-white rounded hover:bg-red-600 transition"
                    onclick="return confirm('Are you sure you want to delete this transaction?')">
                    Delete
                  </a>
                </td>

              </tr>
              {% empty %}
              <tr>
                <td colspan="7" class="text-center p-6 text-gray-400 italic">
                  No transactions found.
                </td>
              </tr>
              {% endfor %}

            </tbody>
          </table>
        </div>


      </div>

    </main>

  </div>

</body>

</html>